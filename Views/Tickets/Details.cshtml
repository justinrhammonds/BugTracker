@model BugTracker.Models.CodeFirst.Ticket

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div>
    <h4>Ticket</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Priority.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Priority.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Project.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Project.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Status.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Status.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.TicketType.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.TicketType.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.RepoLocation)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.RepoLocation)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.CreatedDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.CreatedDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ModifiedDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ModifiedDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.CreatedById)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.CreatedById)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.AssignedToId)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.AssignedToId)
        </dd>

    </dl>
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
    @Html.ActionLink("Back to List", "Index")
</p>
<hr />
<form action="@Url.Action("CreateComment","Tickets")" method="post">
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()
    @ViewBag.CommentMessage
    <input type="hidden" name="TicketId" value="@Model.Id" />
    <div class="form-group">
        <textarea class="form-control" name="Body" rows="2"></textarea>
    </div>
    <input type="submit" value="Submit" class="btn btn-info" />
</form>
<hr />
<div class="col-xs-12 comment-list">
    @foreach (var comment in Model.Comments)
    {
        <div class="col-xs-12">
            <span class="comment-name">@comment.User.FullName | </span><span class="comment-date">@comment.CreatedDate.ToString("dddd, MMMM d, yyyy")</span>

            <div class="post-comment">
                <span class="comment-body">@comment.Body</span>
            </div>
        </div>
    }
</div>

<div class="col-xs-12">
    @using (Html.BeginForm("AttachFile", "Tickets", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary();
        @ViewBag.AttachmentMessage
        <ol>
            <li class="lifile">
                <input type="hidden" name="TicketId" value="@Model.Id" />
                <input type="file" id="fileToUpload" name="file" />
                <span class="field-validation-error" id="spanfile"></span>
            </li>
        </ol>
        <input type="submit" id="btnSubmit" value="Upload" />
    }
</div>

@section Scripts {
    <script src="~/Scripts/fileValidation.js" type="text/javascript"></script>
}

